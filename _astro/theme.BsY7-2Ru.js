import{j as T}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.Cg7RG_vx.js";const y=["dark","elegant","light","theme001","theme002"],c={template:["default"],thermosolis:["default"]},a=["system",...y,...Object.values(c).flat().map((e,s)=>`${Object.keys(c)[Math.floor(s/Object.values(c)[0].length)]}/${e}`)],w=n.createContext(void 0),M=e=>a.includes(e),h=e=>e.replace(/\//g,"-"),u=e=>e==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e,f=e=>{const s=document.documentElement;a.forEach(r=>{r!=="system"&&s.classList.remove(h(r))}),s.classList.add(h(e))};function S({children:e,defaultTheme:s="light",storageKey:r="yacms-ui-theme",...v}){const[o,E]=n.useState(()=>{if(typeof window>"u")return s;const t=localStorage.getItem(r);return t&&M(t)?t:s}),[p,m]=n.useState(()=>typeof window>"u"?s==="system"?"light":s:u(o));return n.useEffect(()=>{const t=u(o);if(f(t),m(t),o==="system"){const i=window.matchMedia("(prefers-color-scheme: dark)"),l=g=>{const d=g.matches?"dark":"light";f(d),m(d)};return i.addEventListener("change",l),()=>i.removeEventListener("change",l)}},[o]),T.jsx(w.Provider,{...v,value:{theme:o,resolvedTheme:p,availableThemes:a.filter(t=>t!=="system"),setTheme:t=>{localStorage.setItem(r,t),E(t)}},children:e})}export{S as ThemeProvider};
