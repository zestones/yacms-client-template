import{j as y}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.Cg7RG_vx.js";const c=["system","dark","light","red"],E=n.createContext(void 0),g=t=>c.includes(t),h=t=>t==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":t,l=t=>{const s=document.documentElement;c.forEach(r=>{r!=="system"&&s.classList.remove(r)}),s.classList.add(t)};function x({children:t,defaultTheme:s="light",storageKey:r="yacms-ui-theme",...u}){const[o,f]=n.useState(()=>{if(typeof window>"u")return s;const e=localStorage.getItem(r);return e&&g(e)?e:s}),[v,i]=n.useState(()=>typeof window>"u"?s==="system"?"light":s:h(o));return n.useEffect(()=>{const e=h(o);if(l(e),i(e),o==="system"){const m=window.matchMedia("(prefers-color-scheme: dark)"),a=p=>{const d=p.matches?"dark":"light";l(d),i(d)};return m.addEventListener("change",a),()=>m.removeEventListener("change",a)}},[o]),y.jsx(E.Provider,{...u,value:{theme:o,resolvedTheme:v,availableThemes:c.filter(e=>e!=="system"),setTheme:e=>{localStorage.setItem(r,e),f(e)}},children:t})}export{x as ThemeProvider};
